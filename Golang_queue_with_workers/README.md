### Задание для команды Kaspersky Container Security

# Описание

Программа реализует очередь задач с WORKERS и поддержкой повторных попыток с экспоненциальной задержкой и случайным джиттером.

## Основные компоненты

### Json\_job – структура задачи

* **Id** – уникальный идентификатор задачи
* **Payload** – данные задачи
* **Max\_retries** – максимальное количество попыток выполнения

### Json\_job\_status – структура состояния задачи

* **Attempts** – количество попыток
* **Status** – текущее состояние задачи: `queued`, `running`, `done`, `failed`

### Очередь задач

* Реализована через канал `chan_job`.
* Размер очереди задается переменной окружения `QUEUE_SIZE` (по умолчанию 64).

### Рабочие (workers)

* Количество рабочих определяется переменной окружения `WORKERS` (по умолчанию 4).
* Каждый рабочий берет задачи из канала и выполняет их.
* При неудаче задача повторяется с экспоненциальным бэкоффом и джиттером.

### API

* **/enqueue** – добавление задачи в очередь. Возвращает `202 Accepted` или `503 Service Unavailable`, если очередь полна.
* **/healthz** – проверка состояния сервера. Возвращает `OK`.

### Механизм завершения работы

* Сервер корректно завершает работу при получении сигналов `SIGINT` или `SIGTERM`.
* Канал задач закрывается, все рабочие завершают текущие задачи.

### Особенности

* Экспоненциальная задержка с джиттером снижает вероятность "пиков" при повторных попытках.
* Потокобезопасное хранение состояния задач через `sync.Map`.
