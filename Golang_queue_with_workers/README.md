### Задание для команды Kaspersky Container Security

# Описание

Программа реализует очередь задач с WORKERS и поддержкой повторных попыток с экспоненциальной задержкой и случайным джиттером.

## Основные компоненты
## Описание

Программа реализует очередь задач с настраиваемым количеством воркеров, поддержкой повторных попыток с экспоненциальной задержкой и случайным джиттером.  
Состояние каждой задачи хранится потокобезопасно и обновляется конкурентно.

## Основные компоненты

### Json_job – структура задачи

* **Id** – уникальный идентификатор задачи  
* **Payload** – произвольные данные задачи  
* **Max_retries** – максимальное количество попыток выполнения  

### Json_job_status – структура состояния задачи

* **Attempts** – количество попыток выполнения  
* **Status** – текущее состояние задачи:  
  * `queued` – задача поставлена в очередь  
  * `running` – задача выполняется воркером  
  * `done` – задача успешно завершена  
  * `failed` – задача окончательно упала после всех попыток  
* **mu** – встроенный `sync.Mutex` для защиты от гонок при обновлении  

### Очередь задач

* Реализована через буферизированный канал `chan_job`.  
* Размер очереди задаётся переменной окружения `QUEUE_SIZE` (по умолчанию `64`).  

### Рабочие (workers)

* Количество воркеров задаётся переменной окружения `WORKERS` (по умолчанию `4`).  
* Каждый воркер забирает задачи из очереди и обрабатывает их.  
* При ошибке выполнение повторяется с экспоненциальной задержкой и джиттером.  

### API

* **POST /enqueue** – добавить задачу в очередь  
  * Тело запроса — JSON вида:  
    ```json
    {
      "id": "task-123",
      "payload": "some data",
      "max_retries": 3
    }
    ```
  * Ответ:  
    * `202 Accepted` – задача успешно добавлена  
    * `503 Service Unavailable` – очередь заполнена  
* **GET /healthz** – проверка состояния сервера  
  * Ответ: `200 OK` с телом `OK`  

### Механизм завершения работы

* Сервер корректно обрабатывает сигналы `SIGINT` и `SIGTERM`.  
* При завершении:
  * HTTP-сервер выключается с таймаутом в 5 секунд,  
  * очередь закрывается,  
  * все воркеры завершают выполнение текущих задач.  

### Особенности

* Экспоненциальная задержка с джиттером предотвращает одновременные повторные попытки.  
* Состояние задач хранится в `sync.Map` с защитой через встроенные мьютексы.  
* Возможность настройки размера очереди и количества воркеров через переменные окружения.  
